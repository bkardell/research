<!DOCTYPE html>
<html>
  <head>
    <title>Glazman CSS Parser AST Object Model</title>
    <script src="https://rawgit.com/therealglazou/jscssp/master/cssParser.js"></script>
    <style>
    	textarea { width: 90%; height: 200px; }
    	button { display: block; }
    </style>
  </head>
  <body>
  	  <h1>What's all this?</h1>
  	  <p>I'm putting together a <a href="https://github.com/bkardell/research">survey</a> of how the various pre/post processors parse and what kind of AST they come up with that allows them to do useful work that can be turned back into CSS.  I'm hoping that by doing so we can gain insight in order to come up with a more intelligent way for the real imperative CSS Parser to produce something useful to developers.  This one is the Less parser...</p>
	  <button>Process</button>
	  <label for="input">Paste some input here</label>
	  <textarea id="input">.foo { color: blue; }</textarea>
	  <hr>
	  <label for="output">It produces the following AST model</label>
	  <textarea id="output"></textarea>
	  <script>
	  var inp = document.querySelector("#input"), out = document.querySelector("#output");
	  document.querySelector("button").addEventListener("click", function () {
	  	var parser = new CSSParser(), parsed = parser.parse(inp.value, false, true);
			out.value = JSON.stringify(parsed, function (k, v) {
				return (/^parent/.test(k)) ? "<pointer>" : v;
			}, 4);
	  }, false);
	  </script>
  </body>
</html>

